(function(i,f,g,h){var j=function(a){var b=this;this.$elem=a;this.$smallBox=this.$elem.find(".small-box");this.$smallBox_pic=this.$smallBox.find("img");this.$smallBox_mask=this.$smallBox.find(".hover");this.$thumbnailBox=this.$elem.find(".thumbnail-box");this.$thumbnailBox_prev=this.$thumbnailBox.find(".btn-prev");this.$thumbnailBox_next=this.$thumbnailBox.find(".btn-next");this.$thumbnailBox_wrapper=this.$thumbnailBox.find(".wrapper");this.$thumbnailBox_item=this.$thumbnailBox.find(".item");this.$thumbnailBox_pic=this.$thumbnailBox.find("img");this.$bigBox=this.$elem.find(".big-box");this.$bigBox_pic=this.$bigBox.find("img")};j.prototype={moveBigPic:function(){var c=this.$smallBox_mask.position().left/(this.$smallBox.width()-this.$smallBox_mask.width());var d=this.$smallBox_mask.position().top/(this.$smallBox.height()-this.$smallBox_mask.height());var b=c*(this.$bigBox_pic.width()-this.$bigBox.width());var a=d*(this.$bigBox_pic.height()-this.$bigBox.height());this.$bigBox.scrollLeft(b).scrollTop(a)},changeSrouce:function(a,b){this.$smallBox_pic.attr("src",b);this.$bigBox_pic.attr("src","images/big_"+(a+1)+".jpg")},setMask:function(){var b=this.$smallBox.width()/(this.$bigBox_pic.width()/this.$bigBox.width());var a=this.$smallBox.height()/(this.$bigBox_pic.height()/this.$bigBox.height());this.$smallBox_mask.css({width:b,height:a})},inital:function(){var a=this;this.$thumbnailBox_next.click(function(){var b=a.$thumbnailBox_item.length-5;var c=b*78;if(b>0){a.$thumbnailBox_wrapper.animate({marginLeft:-c})}});this.$thumbnailBox_prev.click(function(){a.$thumbnailBox_wrapper.animate({marginLeft:0})});this.$thumbnailBox_item.mouseover(function(){var b=i(this).attr("data-src");a.$thumbnailBox_item.removeClass("item-cur");i(this).addClass("item-cur");a.changeSrouce(i(this).index(),b)});this.$smallBox.hover(function(){a.$bigBox.show();a.$smallBox_mask.show();a.setMask();i(this).mousemove(function(b){var c=b||f.event;var d={left:c.clientX-i(this).offset().left-a.$smallBox_mask.width()/2,top:c.clientY-i(this).offset().top-a.$smallBox_mask.height()/2+i(f).scrollTop()};if(d.left<0){d.left=0}else{if(d.left>i(this).width()-a.$smallBox_mask.width()){d.left=i(this).width()-a.$smallBox_mask.width()}}if(d.top<0){d.top=0}else{if(d.top>i(this).height()-a.$smallBox_mask.height()){d.top=i(this).height()-a.$smallBox_mask.height()}}a.$smallBox_mask.css(d);a.moveBigPic()})},function(){a.$smallBox_mask.hide();a.$bigBox.hide()})},constructor:j};i.fn.magnifier=function(){var a=new j(this);return a.inital()}})(jQuery,window,document);