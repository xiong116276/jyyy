<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"/>
  <meta content="yes" name="apple-mobile-web-app-capable">
  <meta content="black" name="apple-mobile-web-app-status-bar-style">
  <meta content="telephone=no" name="format-detection">
  <title>注册</title>
  <script src="js/rem.js"></script>
  <link rel="stylesheet" href="css/weui.min.css">
  <link rel="stylesheet" href="css/jquery-weui.min.css">
  <link rel="stylesheet" href="css/common.css">
  <link rel="stylesheet" href="css/apply-account.css">
</head>
<body>
  <section class="apply-account-container">
    <div class="top">
      <ul class="clearfix">
        <li class="active">企业信息</li>
        <li>资质文件</li>
        <li>完成</li>
      </ul>
    </div>
    <div class="apply-account-content">
      <!--企业信息-->
      <div class="content-tab data-content">
        <form action="">
          <div class="input-group">
            <label for="applyType">类型</label>
            <input id="applyType" readonly type="text">
            <em class="icon-arrow-right"></em>
          </div>
          <div class="input-group">
            <label for="applyArea">地区</label>
            <input id="applyArea" readonly type="text">
            <em class="icon-arrow-right"></em>
          </div>
          <div class="input-group">
            <label for="applyAddress">地址</label>
            <input id="applyAddress" type="text">
            <em class="icon-arrow-right"></em>
          </div>
          <div class="input-group">
            <label for="applyName">联系人</label>
            <input id="applyName" type="text">
            <em class="icon-arrow-right"></em>
          </div>
          <div class="input-group">
            <label for="applyPhone">手机号</label>
            <input id="applyPhone" type="tel">
          </div>
          <div class="input-group">
            <label for="applyCode">验证码</label>
            <input class="apply-code" id="applyCode" type="text">
            <a class="btn-get-code" href="javascript:void(0)">
              获取验证码
            </a>
          </div>
          <div class="btn-submit">
            提交
          </div>
        </form>
      </div>
      <!--资质文件-->
      <div class="content-tab hide">

        <div class="qualification clearfix">
          <!--<div class="qualification-item">-->
            <!--<p class="item-title">营业执照</p>-->
            <!--<div class="item-images">-->
              <!--<input type="file">-->
              <!--<images class="center-elm" src="images/bg-add.png" alt="">-->
            <!--</div>-->
          <!--</div>-->
          <!--<div class="qualification-item">-->
            <!--<p class="item-title">药品经营许可证</p>-->
            <!--<div class="item-images">-->
              <!--<input type="file">-->
              <!--<images class="center-elm" src="images/bg-add.png" alt="">-->
            <!--</div>-->
          <!--</div>-->
          <!--<div class="qualification-item">-->
            <!--<p class="item-title">GSP证件</p>-->
            <!--<div class="item-images">-->
              <!--<input type="file">-->
              <!--<images class="center-elm" src="images/bg-add.png" alt="">-->
            <!--</div>-->
          <!--</div>-->
          <!--<div class="qualification-item">-->
            <!--<p class="item-title">医疗器械经营许可证</p>-->
            <!--<div class="item-images">-->
              <!--<input type="file">-->
              <!--<images class="center-elm" src="images/bg-add.png" alt="">-->
            <!--</div>-->
          <!--</div>-->
          <!--<div class="qualification-item">-->
            <!--<p class="item-title">二类医疗器械备案证</p>-->
            <!--<div class="item-images">-->
              <!--<input type="file">-->
              <!--<images class="center-elm" src="images/bg-add.png" alt="">-->
            <!--</div>-->
          <!--</div>-->
          <!--<div class="qualification-item">-->
            <!--<p class="item-title">食品经营许可证</p>-->
            <!--<div class="item-images">-->
              <!--<input type="file">-->
              <!--<images class="center-elm" src="images/bg-add.png" alt="">-->
            <!--</div>-->
          <!--</div>-->
        </div>

        <div class="btn-submit">
          下一步
        </div>
      </div>
      <!--完成-->
      <div class="content-tab hide">
        <div class="complete">
          <div class="complete-content">
            <p>✔</p>
          </div>
          <p>申请成功，资料等待平台审核...</p>
        </div>
      </div>
    </div>
  </section>
  <script src="js/jquery-3.1.1.js"></script>
  <script src="js/jquery-weui.min.js"></script>
  <script src="js/city-picker.min.js"></script>
  <script>
    var applyAccount = {
      types:[
        ["营业执照","药品经营许可证","GSP证","医疗器械经营许可证","二类医疗器械备案证","食品经营许可证"],
        ["营业执照","药品经营许可证","GSP证","医疗器械经营许可证","二类医疗器械备案证","食品经营许可证"],
        ["营业执照","医疗机构执业许可证","法人授权委托书"],
        ["营业执照","经过合法核准的经营许可证"],
      ],
      init: function () {
        this.applyType();
        this.applyArea();

        this.submitFun();
      },
      //创建元素函数
      element: function (tag,attrs,html) {
        var element = document.createElement(tag);
        // 判断第二个参数是属性还是内容
        if(typeof(attrs) === "string"){
          html = attrs;
          attrs = null;
        }
        // 判断是否有属性
        if(attrs !== undefined){
          for(var attr in attrs){
            element.setAttribute(attr,attrs[attr]);
          }
        }
        // 判断是否有内容
        if(html !== undefined){
          element.innerHTML = html;
        }
        return element;
      },
      //注册类型选择
      applyType:function () {
        $("#applyType").picker({
          title: "请选择类型",
          cols: [
            {
              textAlign: 'center',
              values: ['批发企业', '药店', '医疗机构', '商行其他']
            }
          ]
        });
      },
      //地区选择
      applyArea:function () {
        $("#applyArea").cityPicker({
          title: "请选择地区"
        });
      },
      //提交
      submitFun:function () {
        $(".btn-submit").on("click",function (e) {
          if($("#applyType").val().length > 0){
            var e = e.target;
            var index = $(e).parents(".content-tab").index();
            $(e).parents(".content-tab").next().removeClass("hide").siblings().addClass("hide");
            $($(".apply-account-container .top li")[index + 1]).addClass("active").siblings("li").removeClass("active");
            switch ($("#applyType").val()){
              case "批发企业" : this.qftFun(0); break;
              case "药店" : this.qftFun(1); break;
              case "医疗机构" : this.qftFun(2); break;
              case "商行其他" : this.qftFun(3); break;
            }
          }
        }.bind(this));
      },
      //资质文件
      qftFun:function (n) {
        var qftFragment = document.createDocumentFragment();
        for(var i = 0;i<this.types[n].length;i++){
          var qftItem = this.element(
            "div",
            {
              "class":"qualification-item"
            },
            "<p class=\"item-title\">"+this.types[n][i]+"</p>\n" +
            "          <div class=\"item-img\">\n" +
            "            <input type=\"file\">\n" +
            "            <img class=\"center-elm\" src=\"images/bg-add.png\" alt=\"\">\n" +
            "          </div>"
          );
          $(qftItem).appendTo($(qftFragment));
        }
        $(".qualification").html($(qftFragment));
        //图片预览
        $(".qualification").on("change",".qualification-item input",function (e) {
          var e = e.target;
          var filelist = e.files;
          var reader = new FileReader;
          reader.readAsDataURL(filelist[0]);
          reader.onload= function () {
            $(e).siblings("img").attr("src", reader.result);
          }
        });
      }
    };
    applyAccount.init();
  </script>
</body>
</html>



















